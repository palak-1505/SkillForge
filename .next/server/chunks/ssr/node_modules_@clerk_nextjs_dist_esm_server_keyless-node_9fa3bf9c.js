module.exports=[488,a=>{"use strict";a.s(["createOrReadKeyless",()=>o,"removeKeyless",()=>p,"safeParseClerkFile",()=>k]);var b=a.i(75582),c=a.i(82943),d=a.i(85978);let e=".clerk",f="clerk.lock",g=(...a)=>{let b=(0,c.nodePathOrThrow)(),d=(0,c.nodeCwdOrThrow)();return b.join(d(),e,...a)},h=".tmp",i=()=>g(h,"keyless.json"),j=!1;function k(){let{readFileSync:a}=(0,c.nodeFsOrThrow)();try{let b,c=i();try{b=a(c,{encoding:"utf-8"})||"{}"}catch{b="{}"}return JSON.parse(b)}catch{return}}let l=()=>{let{writeFileSync:a}=(0,c.nodeFsOrThrow)();j=!0,a(f,"This file can be deleted. Please delete this file and refresh your application",{encoding:"utf8",mode:"0777",flag:"w"})},m=()=>{let{rmSync:a}=(0,c.nodeFsOrThrow)();try{a(f,{force:!0,recursive:!0})}catch{}j=!1},n=()=>{let{existsSync:a}=(0,c.nodeFsOrThrow)();return j||a(f)};async function o(){let{writeFileSync:a,mkdirSync:f}=(0,c.nodeFsOrThrow)();if(n())return null;l();let j=i(),o=g(h,"README.md");f(g(h),{recursive:!0}),function(){let{existsSync:a,writeFileSync:b,readFileSync:d,appendFileSync:f}=(0,c.nodeFsOrThrow)(),g=(0,c.nodePathOrThrow)(),h=(0,c.nodeCwdOrThrow)(),i=g.join(h(),".gitignore");a(i)||b(i,""),d(i,"utf-8").includes(e+"/")||f(i,`
# clerk configuration (can include secrets)
/${e}/
`)}();let p=k();if((null==p?void 0:p.publishableKey)&&(null==p?void 0:p.secretKey))return m(),p;let q=(0,b.createClerkClientWithOptions)({}),r=await (0,d.collectKeylessMetadata)().then(d.formatMetadataHeaders).catch(()=>new Headers),s=await q.__experimental_accountlessApplications.createAccountlessApplication({requestHeaders:r}).catch(()=>null);return s&&(a(j,JSON.stringify(s),{encoding:"utf8",mode:"0777",flag:"w"}),a(o,`
## DO NOT COMMIT
This directory is auto-generated from \`@clerk/nextjs\` because you are running in Keyless mode. Avoid committing the \`.clerk/\` directory as it includes the secret key of the unclaimed instance.
  `,{encoding:"utf8",mode:"0777",flag:"w"})),m(),s}function p(){let{rmSync:a}=(0,c.nodeFsOrThrow)();if(!n()){l();try{a(g(),{force:!0,recursive:!0})}catch{}m()}}}];

//# sourceMappingURL=node_modules_%40clerk_nextjs_dist_esm_server_keyless-node_9fa3bf9c.js.map